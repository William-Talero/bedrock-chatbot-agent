{
  "openapi": "3.0.0",
  "info": {
    "title": "Davivienda Bedrock Agent Creation API",
    "version": "1.0.0",
    "description": "API para creación y gestión de agentes AWS Bedrock"
  },
  "paths": {
    "/create-bedrock-agent": {
      "post": {
        "summary": "Crear agente de AWS Bedrock",
        "description": "Crea un nuevo agente de AWS Bedrock con configuración personalizada",
        "operationId": "createBedrockAgent",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateAgentRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Agente creado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentResponse"
                }
              }
            }
          }
        }
      }
    },
    "/update-bedrock-agent": {
      "post": {
        "summary": "Actualizar agente de Bedrock",
        "description": "Actualiza la configuración de un agente existente",
        "operationId": "updateBedrockAgent",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateAgentRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Agente actualizado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentResponse"
                }
              }
            }
          }
        }
      }
    },
    "/list-bedrock-agents": {
      "post": {
        "summary": "Listar agentes de Bedrock",
        "description": "Lista todos los agentes de Bedrock o filtra por criterios",
        "operationId": "listBedrockAgents",
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ListAgentsRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Lista de agentes obtenida exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ListAgentsResponse"
                }
              }
            }
          }
        }
      }
    },
    "/prepare-bedrock-agent": {
      "post": {
        "summary": "Preparar agente de Bedrock",
        "description": "Prepara un agente para ser usado (crea versión DRAFT lista)",
        "operationId": "prepareBedrockAgent",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PrepareAgentRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Agente preparado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PrepareAgentResponse"
                }
              }
            }
          }
        }
      }
    },
    "/create-agent-alias": {
      "post": {
        "summary": "Crear alias para agente",
        "description": "Crea un alias que apunta a una versión específica del agente",
        "operationId": "createAgentAlias",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateAliasRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Alias creado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AliasResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "CreateAgentRequest": {
        "type": "object",
        "properties": {
          "agentName": {
            "type": "string",
            "description": "Nombre del agente (ej: customer-support-agent)"
          },
          "description": {
            "type": "string",
            "description": "Descripción del propósito del agente"
          },
          "instructions": {
            "type": "string",
            "description": "Instrucciones detalladas para el comportamiento del agente"
          },
          "foundationModel": {
            "type": "string",
            "description": "ID del modelo (ej: anthropic.claude-3-haiku-20240307-v1:0)",
            "default": "anthropic.claude-3-haiku-20240307-v1:0"
          },
          "idleSessionTTLInSeconds": {
            "type": "integer",
            "description": "Tiempo de vida de sesión inactiva en segundos",
            "default": 600
          },
          "projectName": {
            "type": "string",
            "description": "Nombre del proyecto para etiquetado"
          },
          "department": {
            "type": "string",
            "description": "Departamento propietario"
          }
        },
        "required": ["agentName", "instructions", "projectName"]
      },
      "UpdateAgentRequest": {
        "type": "object",
        "properties": {
          "agentId": {
            "type": "string",
            "description": "ID del agente a actualizar"
          },
          "agentName": {
            "type": "string",
            "description": "Nuevo nombre del agente"
          },
          "description": {
            "type": "string",
            "description": "Nueva descripción"
          },
          "instructions": {
            "type": "string",
            "description": "Nuevas instrucciones"
          },
          "foundationModel": {
            "type": "string",
            "description": "Nuevo modelo foundation"
          }
        },
        "required": ["agentId"]
      },
      "ListAgentsRequest": {
        "type": "object",
        "properties": {
          "maxResults": {
            "type": "integer",
            "description": "Número máximo de resultados",
            "default": 10
          },
          "projectName": {
            "type": "string",
            "description": "Filtrar por proyecto"
          }
        }
      },
      "PrepareAgentRequest": {
        "type": "object",
        "properties": {
          "agentId": {
            "type": "string",
            "description": "ID del agente a preparar"
          }
        },
        "required": ["agentId"]
      },
      "CreateAliasRequest": {
        "type": "object",
        "properties": {
          "agentId": {
            "type": "string",
            "description": "ID del agente"
          },
          "aliasName": {
            "type": "string",
            "description": "Nombre del alias (ej: production, staging)"
          },
          "description": {
            "type": "string",
            "description": "Descripción del alias"
          }
        },
        "required": ["agentId", "aliasName"]
      },
      "AgentResponse": {
        "type": "object",
        "properties": {
          "agentId": {
            "type": "string",
            "description": "ID del agente creado/actualizado"
          },
          "agentName": {
            "type": "string",
            "description": "Nombre del agente"
          },
          "agentArn": {
            "type": "string",
            "description": "ARN del agente"
          },
          "agentStatus": {
            "type": "string",
            "description": "Estado del agente"
          },
          "foundationModel": {
            "type": "string",
            "description": "Modelo foundation utilizado"
          },
          "message": {
            "type": "string",
            "description": "Mensaje de confirmación"
          }
        }
      },
      "ListAgentsResponse": {
        "type": "object",
        "properties": {
          "agents": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "agentId": {
                  "type": "string"
                },
                "agentName": {
                  "type": "string"
                },
                "agentStatus": {
                  "type": "string"
                },
                "description": {
                  "type": "string"
                },
                "updatedAt": {
                  "type": "string"
                }
              }
            }
          },
          "totalCount": {
            "type": "integer",
            "description": "Cantidad total de agentes"
          }
        }
      },
      "PrepareAgentResponse": {
        "type": "object",
        "properties": {
          "agentId": {
            "type": "string",
            "description": "ID del agente"
          },
          "agentStatus": {
            "type": "string",
            "description": "Estado del agente después de preparación"
          },
          "preparedAt": {
            "type": "string",
            "description": "Timestamp de preparación"
          },
          "message": {
            "type": "string",
            "description": "Mensaje de confirmación"
          }
        }
      },
      "AliasResponse": {
        "type": "object",
        "properties": {
          "agentId": {
            "type": "string",
            "description": "ID del agente"
          },
          "agentAliasId": {
            "type": "string",
            "description": "ID del alias creado"
          },
          "agentAliasName": {
            "type": "string",
            "description": "Nombre del alias"
          },
          "agentAliasArn": {
            "type": "string",
            "description": "ARN del alias"
          },
          "message": {
            "type": "string",
            "description": "Mensaje de confirmación"
          }
        }
      }
    }
  }
}
